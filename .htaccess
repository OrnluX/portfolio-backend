# Desactivar listado de directorios
Options -Indexes

RewriteEngine On
RewriteBase /

# Bloquear carpetas sensibles
RewriteRule ^(vendor|config)($|/) - [F,L]

# Bloquear archivos ocultos como .env, .git, etc.
RewriteRule (^|/)\..+ - [F,L]

# Rutas limpias bajo /proyectos/
RewriteRule ^proyectos$ api/proyectos/index.php [L]
RewriteRule ^proyectos/crear$ api/proyectos/crear.php [L]
RewriteRule ^proyectos/editar$ api/proyectos/editar.php [L]
RewriteRule ^proyectos/eliminar$ api/proyectos/eliminar.php [L]

# Evitar acceso externo a otras rutas que no sean /api o /proyectos/*
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/api/
RewriteCond %{REQUEST_URI} !^/proyectos/
RewriteRule ^.*$ - [F,L]

# Seguridad adicional con headers
<IfModule mod_headers.c>
  Header always set X-Content-Type-Options "nosniff"
  Header always set X-Frame-Options "DENY"
  Header always set X-XSS-Protection "1; mode=block"
</IfModule>
